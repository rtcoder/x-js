{"version":3,"file":"index.umd.js","sources":["../src/main.ts"],"sourcesContent":["type MixedObject = {\n  [key: string]: any;\n}\ntype XInstanceData = {\n  container: HTMLElement | string;\n  data: MixedObject;\n  methods?: MixedObject;\n}\ntype Binding = {\n  path: string,\n  placeholder: string | null,\n};\ntype Bindings = Binding[];\ntype ForConfig = {\n  item: string; // Nazwa zmiennej iteracyjnej (np. 'item')\n  list: string; // Wyrażenie reprezentujące listę w modelu (np. 'items' lub 'model.items')\n}\ntype VNode = {\n  type: string;\n  props: MixedObject;\n  content: string | null;\n  children: VNode[];\n  element: HTMLElement;\n  bindPathList: Bindings;\n  forConfig: ForConfig | null;\n}\nconst MODEL_PROP = '@model';\nconst CLICK_PROP = '@click';\nconst IF_PROP = '@if';\nconst FOR_PROP = '@for';\n\nfunction getBindings(element: HTMLElement): Bindings {\n  const attributeBindings: Bindings = [];\n  const xFor = element.getAttribute(FOR_PROP);\n  if (xFor) {\n    const [, list] = xFor.split(' in ');\n    attributeBindings.push({path: list, placeholder: null});\n    return attributeBindings;\n  }\n  if (element.childNodes.length) {\n    return [];\n  }\n  const textBindings = getBindingsForText(element.textContent);\n  if (element.nodeType === Node.TEXT_NODE) {\n    return textBindings;\n  }\n  const xModel = element.getAttribute(MODEL_PROP);\n  if (xModel) {\n    attributeBindings.push({path: xModel, placeholder: xModel});\n  }\n  return [...textBindings, ...attributeBindings];\n}\n\nfunction getBindingsForText(content: string | null): Bindings {\n  if (!content) {\n    return [];\n  }\n  const matches = Array.from(content.matchAll(/\\{\\s*([\\w.]+)\\s*\\}/g));\n  return matches.map((match) => ({\n    path: match[1].trim(),\n    placeholder: match[0],\n  }));\n}\n\nfunction getChildren(element: HTMLElement): VNode[] {\n  return Array.from(element.childNodes).map((child) => {\n    if (child.nodeType === Node.ELEMENT_NODE) {\n      return createVirtualDOM(child as HTMLElement);\n    } else if (child.nodeType === Node.TEXT_NODE) {\n      return {\n        type: 'text',\n        content: child.textContent,\n        props: {},\n        children: [],\n        element: child,\n        bindPathList: getBindingsForText(child.textContent),\n        forConfig: null,\n      };\n    } else if (child.nodeType === Node.COMMENT_NODE) {\n      return {\n        type: 'comment',\n        content: child.textContent,\n        props: {},\n        children: [],\n        element: child,\n        bindPathList: getBindingsForText(child.textContent),\n        forConfig: null,\n      };\n    }\n  }).filter(Boolean) as VNode[];\n}\n\nfunction parseForDirective(forValue: string): ForConfig {\n  const match = forValue.match(/(\\w+)\\s+in\\s+(.+)/);\n  if (!match) {\n    throw new Error(`Invalid @for syntax: ${forValue}`);\n  }\n  return {item: match[1], list: match[2]};\n}\n\nfunction createVirtualDOM(element: HTMLElement): VNode {\n  const type = element.tagName.toLowerCase();\n  const props: MixedObject = {};\n  const content = element.textContent;\n\n  Array.from(element.attributes).forEach((attr) => {\n    props[attr.name] = attr.value;\n  });\n// Obsługa @for\n  const forDirective = props[FOR_PROP];\n  let forConfig = null;\n  if (forDirective) {\n    forConfig = parseForDirective(forDirective);\n  }\n  const children = getChildren(element);\n  const bindings = getBindings(element);\n  element.removeAttribute(MODEL_PROP);\n  element.removeAttribute(IF_PROP);\n  element.removeAttribute(FOR_PROP);\n  element.removeAttribute(CLICK_PROP);\n  return {\n    type,\n    props,\n    children,\n    content,\n    element,\n    bindPathList: bindings,\n    forConfig,\n  };\n}\n\nfunction createReactiveModel(model: any, onChange: (path: string) => void): any {\n  function createProxy(obj: any, path: string[] = []): any {\n    if (Array.isArray(obj)) {\n      // Obsługa tablic\n      return new Proxy(obj, {\n        get(target, key: any) {\n          console.log(path);\n          console.log(key);\n          console.log('Tablica odczytana:', [...path, key as string].join('.'));\n          if (typeof key === 'string' && ['push', 'pop', 'splice', 'shift', 'unshift'].includes(key)) {\n            return (...args: any[]) => {\n              const result = Array.prototype[key as any].apply(target, args) as any;\n              // Powiadom o zmianach w tablicy\n              onChange(path.join('.'));\n              return result;\n            };\n          }\n\n          const value = target[key as any];\n          if (typeof value === 'object' && value !== null) {\n            return createProxy(value, [...path, key as string]);\n          }\n          return value;\n        },\n        set(target, key, value) {\n          console.log('Tablica zmieniona:', [...path, key as string].join('.'), 'Nowa wartość:', value);\n          target[key as any] = value;\n          onChange(path.join('.'));\n          return true;\n        },\n      });\n    } else if (typeof obj === 'object' && obj !== null) {\n      // Obsługa obiektów\n      return new Proxy(obj, {\n        get(target, key) {\n          const value = target[key];\n          if (typeof value === 'object' && value !== null) {\n            return createProxy(value, [...path, key as string]);\n          }\n          return value;\n        },\n        set(target, key, value) {\n          console.log('Model zmieniony:', [...path, key as string].join('.'), 'Nowa wartość:', value);\n          target[key] = value;\n          onChange([...path, key as string].join('.'));\n          return true;\n        },\n      });\n    }\n    return obj;\n  }\n\n  return createProxy(model);\n}\n\n\nfunction updateHTML(root: HTMLElement, vDom: VNode, model: any, path: string): void {\n  vDom.children.forEach((childVNode, index) => {\n    if (childVNode.props[IF_PROP]) {\n      const condition = childVNode.props[IF_PROP];\n      const isVisible = new Function('model', `with(model) { return ${condition}; }`)(model);\n\n      if (!isVisible) {\n        childVNode.element.style.display = 'none';\n        return;\n      } else {\n        childVNode.element.style.display = '';\n      }\n    }\n    if (childVNode.children.length) {\n      updateHTML(root, childVNode, model, path);\n    }\n    if (childVNode.props[MODEL_PROP] === path) {\n      const value = path.split('.').reduce((obj, key) => obj[key], model);\n      if (childVNode.element.tagName === 'INPUT') {\n        const input = childVNode.element as HTMLInputElement;\n        if (input.value !== value) {\n          input.value = value;\n        }\n      } else {\n        childVNode.element.textContent = value;\n      }\n      return;\n    }\n    if (!childVNode.bindPathList.length) {\n      return;\n    }\n\n    const foundBindings = childVNode.bindPathList.filter((bindPath) => bindPath.path === path);\n    if (!foundBindings.length) {\n      return;\n    }\n    let newContent = childVNode.content || '';\n    childVNode.bindPathList\n      .filter((b) => !!b.placeholder)\n      .forEach((binding) => {\n        const value = binding.path.split('.').reduce((obj, key) => obj[key], model);\n        newContent = newContent!.replace(binding.placeholder!, value ?? '');\n      });\n    childVNode.element.textContent = newContent;\n  });\n}\n\nfunction bindXModel(element: HTMLElement, model: any, path: string): void {\n  const target = path.split('.').reduce((obj, key) => obj[key], model);\n\n  if (element.tagName === 'INPUT') {\n    const input = element as HTMLInputElement;\n\n    // Ustaw wartość początkową\n    input.value = target;\n\n    // Zdarzenie na zmianę wartości\n    input.addEventListener('input', (e) => {\n      const newValue = (e.target as HTMLInputElement).value;\n      const keys = path.split('.');\n      const lastKey = keys.pop()!;\n      const targetObject = keys.reduce((obj, key) => obj[key], model);\n      targetObject[lastKey] = newValue; // To wywoła Proxy\n    });\n  } else {\n    // Ustaw tekst początkowy\n    element.textContent = target;\n  }\n}\n\nfunction bindClick(element: HTMLElement, vNode: VNode, model: any): void {\n  const clickHandler = vNode.props[CLICK_PROP];\n  if (clickHandler) {\n    const fn = new Function('model', `with(model) { ${clickHandler} }`);\n    element.addEventListener('click', () => fn(model));\n  }\n}\n\nfunction bindPlaceholdersUsingVirtualDOM(vNode: VNode, model: any): void {\n  const {content, props, element, bindPathList, forConfig} = vNode;\n\n  if (forConfig) {\n    return;\n  }\n  if (content && content.includes('{') && content.includes('}') && element.nodeType === Node.TEXT_NODE) {\n\n    const updateText = () => {\n      let updatedText = content;\n      bindPathList\n        .filter((b) => !!b.placeholder)\n        .forEach(({path, placeholder}) => {\n          const value = path.split('.').reduce((obj, key) => obj[key], model);\n          updatedText = updatedText.replace(placeholder!, value ?? '');\n        });\n      element.textContent = updatedText;\n    };\n\n    updateText();\n\n    // Odświeżanie tekstu na zmianę modelu\n    bindPathList.forEach(({path}) => {\n      createReactiveModel(model, (updatedPath) => {\n        if (updatedPath.startsWith(path.split('.')[0])) {\n          updateText();\n        }\n      });\n    });\n  }\n\n  // Przetwarzaj dzieci rekurencyjnie\n  vNode.children.forEach((childVNode) => {\n    if (typeof childVNode === 'object') {\n      bindPlaceholdersUsingVirtualDOM(childVNode, model);\n    }\n  });\n}\n\nexport function initializeAppWithVirtualDOM(instanceData: XInstanceData): void {\n  const {container, data} = instanceData;\n  const root = typeof container === 'string'\n    ? document.querySelector(container) as HTMLElement\n    : container;\n\n  const virtualDOM = createVirtualDOM(root);\n\n  console.log(virtualDOM);\n\n  const reactiveModel = createReactiveModel(data, (path) => {\n    updateHTML(root, virtualDOM, reactiveModel, path);\n  });\n\n  function processVNode(vNode: VNode, parentElement: HTMLElement, model: any): void {\n    const {props, element, forConfig} = vNode;\n    // Obsługa @if\n    if (props[IF_PROP]) {\n      const condition = props[IF_PROP];\n      const isVisible = new Function('model', `with(model) { return ${condition}; }`)(model);\n\n      if (!isVisible) {\n        element.style.display = 'none';\n        return;\n      } else {\n        element.style.display = '';\n      }\n    }\n    // Obsługa @for\n    if (forConfig) {\n      const {item, list} = forConfig;\n      const fn = new Function('model', `with(model) { return ${list}; }`);\n      const dataList = fn(model);\n\n      // Usuń oryginalny element z DOM (będzie zastąpiony klonami)\n      element.style.display = 'none';\n      const fragment = document.createDocumentFragment();\n      dataList.forEach((dataItem: any) => {\n        const localModel = {[item]: dataItem};\n\n        // Klonuj element\n        const clonedElement = element.cloneNode(true) as HTMLElement;\n        clonedElement.removeAttribute('@for');\n        clonedElement.style.display = ''; // Odsłoń klon\n\n        // Stwórz wirtualny DOM dla klonu\n        const clonedVNode = createVirtualDOM(clonedElement);\n\n        // Przetwarzaj klon z lokalnym modelem\n        processVNode(clonedVNode, clonedElement, localModel);\n\n        fragment.appendChild(clonedElement);\n      });\n\n      parentElement.parentNode?.replaceChild(fragment, element);\n      return;\n    }\n    if (props[MODEL_PROP]) {\n      bindXModel(parentElement, reactiveModel, props[MODEL_PROP]);\n    }\n\n    if (props[CLICK_PROP]) {\n      bindClick(parentElement, vNode, reactiveModel);\n    }\n\n    bindPlaceholdersUsingVirtualDOM(vNode, model);\n\n    vNode.children.forEach((childVNode, index) => {\n      if (typeof childVNode === 'object') {\n        const childElement = parentElement.childNodes[index] as HTMLElement;\n        processVNode(childVNode, childElement, model);\n      }\n    });\n  }\n\n\n  processVNode(virtualDOM, root, data);\n}\n\n"],"names":["MODEL_PROP","CLICK_PROP","IF_PROP","FOR_PROP","getBindings","element","attributeBindings","xFor","list","textBindings","getBindingsForText","xModel","content","match","getChildren","child","createVirtualDOM","parseForDirective","forValue","type","props","attr","forDirective","forConfig","children","bindings","createReactiveModel","model","onChange","createProxy","obj","path","target","key","args","result","value","updateHTML","root","vDom","childVNode","index","condition","input","bindPath","newContent","b","binding","bindXModel","e","newValue","keys","lastKey","targetObject","bindClick","vNode","clickHandler","fn","bindPlaceholdersUsingVirtualDOM","bindPathList","updateText","updatedText","placeholder","updatedPath","initializeAppWithVirtualDOM","instanceData","container","data","virtualDOM","reactiveModel","processVNode","parentElement","item","dataList","fragment","dataItem","localModel","clonedElement","clonedVNode","_a","childElement"],"mappings":"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"}