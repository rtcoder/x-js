(function(u,l){typeof exports=="object"&&typeof module<"u"?l(exports):typeof define=="function"&&define.amd?define(["exports"],l):(u=typeof globalThis<"u"?globalThis:u||self,l(u["x-js"]={}))})(this,function(u){"use strict";function l(o,i){function n(s,c=[]){return new Proxy(s,{get(t,r){const e=t[r];return typeof e=="object"&&e!==null?n(e,[...c,r]):e},set(t,r,e){return t[r]=e,i([...c,r].join(".")),!0}})}return n(o)}function g(o,i,n){[...o.querySelectorAll(`[data-bind-path="${n}"]`).values()].forEach(c=>{if(c.tagName==="INPUT"){const t=c,r=n.split(".").reduce((e,a)=>e[a],i);t.value!==r&&(t.value=r)}else{const t=c.textContent||"";t.includes("{")&&t.includes("}")?b(c,i):c.textContent=n.split(".").reduce((r,e)=>r[e],i)}})}function f(o){const i=document.createElement(o.type);o.content&&(i.textContent=o.content);for(const[n,s]of Object.entries(o.props))if(n.startsWith("on")&&typeof s=="function"){const c=n.slice(2).toLowerCase();i.addEventListener(c,s)}else i[n]=s;return o.children.forEach(n=>{const s=typeof n=="string"?document.createTextNode(n):f(n);i.appendChild(s)}),i}function y(o,i,n,s=0){const c=o.childNodes[s];if(!n){o.appendChild(f(i));return}if(!i){c&&o.removeChild(c);return}if(i.type!==n.type){o.replaceChild(f(i),c);return}const t=c;for(const[e,a]of Object.entries(i.props))e.startsWith("on")||t[e]!==a&&(t[e]=a);for(const e of Object.keys(n.props))e in i.props||(t[e]=void 0);const r=Math.max(i.children.length,n.children.length);for(let e=0;e<r;e++)y(t,i.children[e],n.children[e],e)}function x(o){const i=o.tagName.toLowerCase(),n={},s=o.textContent;Array.from(o.attributes).forEach(t=>{n[t.name]=t.value});const c=Array.from(o.childNodes).map(t=>{if(t.nodeType===Node.ELEMENT_NODE)return x(t);if(t.nodeType===Node.TEXT_NODE)return{type:"text",props:{value:t.textContent},children:[]}}).filter(Boolean);return{type:i,props:n,children:c,content:s}}function C(o,i,n){const s=n.split(".").reduce((c,t)=>c[t],i);if(o.tagName==="INPUT"){const c=o;c.value=s,c.addEventListener("input",t=>{const r=t.target.value,e=n.split("."),a=e.pop(),d=e.reduce((p,h)=>p[h],i);d[a]=r})}else o.textContent=s;o.setAttribute("data-bind-path",n)}function E(o,i){const n=o.getAttribute("@click");if(n){const s=new Function("model",`with(model) { ${n} }`);o.addEventListener("click",()=>s(i))}}function b(o,i){const n=o.textContent||"",s=n.matchAll(/\{\s*([\w.]+)\s*\}/g),c=[];for(const r of s){const e=r[1].trim(),a=r[0];c.push({path:e,placeholder:a})}function t(){let r=n;for(const{path:e,placeholder:a}of c){const d=e.split(".").reduce((p,h)=>p[h],i);r=r.replace(a,d??"")}o.textContent=r}t(),l(i,r=>{c.some(({path:e})=>r.startsWith(e.split(".")[0]))&&t()})}function T(o,i){const n=document.querySelector(o),s=l(i,t=>{g(n,s,t)});function c(t){const r=t.getAttribute("x-model");if(r&&C(t,s,r),E(t,s),t.childNodes.length===1&&t.childNodes[0].nodeType===Node.TEXT_NODE){const e=t.textContent||"";e.includes("{")&&e.includes("}")&&b(t,s)}Array.from(t.children).forEach(e=>c(e))}c(n)}u.bindClick=E,u.createVirtualDOM=x,u.initializeApp=T,u.render=f,u.updateElement=y,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
