(function(u,p){typeof exports=="object"&&typeof module<"u"?p(exports):typeof define=="function"&&define.amd?define(["exports"],p):(u=typeof globalThis<"u"?globalThis:u||self,p(u["x-js"]={}))})(this,function(u){"use strict";function p(n,o){return(t,e)=>{o.has(t)||o.set(t,[]),o.get(t).push(e),e.type==="checkbox"?e.checked=n[t]:e.type==="radio"?e.checked=e.value===n[t]:e.value=n[t],e.addEventListener("input",()=>{e.type==="checkbox"?n[t]=e.checked:e.type==="radio"?e.checked&&(n[t]=e.value):n[t]=e.value}),e.tagName==="SELECT"&&e.addEventListener("change",()=>{n[t]=e.value})}}function l(n,o){return o.split(".").reduce((t,e)=>t&&t[e],n)}function T(n,o,t){const e=o.split(".");let r=n;for(let i=0;i<e.length-1;i++)r=r[e[i]];const s=e[e.length-1];r&&(r[s]=t,n[s]=t),N(n)}function N(n){document.querySelectorAll("*").forEach(o=>{o.tagName!=="SCRIPT"&&o.childNodes.length===1&&o.childNodes[0].nodeType===Node.TEXT_NODE&&n.bindText(o)})}function C(n,o){return t=>{const e=t.getAttribute("x-model");e?t.dataset.originalContent=`{${e}}`:t.dataset.originalContent||(t.dataset.originalContent=t.textContent);const r=t.dataset.originalContent,s=r.match(/{\s*[\w.]+\s*}/g);if(s){const i=()=>{t.textContent=r.replace(/{\s*([\w.]+)\s*}/g,(f,d)=>l(n,d.trim())||"")};s.forEach(f=>{const d=f.replace(/[{}]/g,"").trim();o.has(d)||o.set(d,[]),o.get(d).push(i)}),i()}}}function x(n){const o=new Map,t=new Map,e={get(s,i){return Reflect.get(s,i)},set(s,i,f){const d=Reflect.set(s,i,f);if(o.has(i)&&o.get(i).forEach(c=>{c.type==="checkbox"?c.checked=f:c.type==="radio"?c.checked=c.value===f:c.value=f}),t.has(i)&&t.get(i).forEach(c=>c()),i.includes(".")){const c=i.split(".");let a=s;for(let h=0;h<c.length-1;h++)a=a[c[h]];const g=c[c.length-1];a&&a.hasOwnProperty(g)&&(a[g]=f)}return d}},r=new Proxy(n,e);return r.bind=p(r,o),r.bindText=C(r,t),r}function v(n,o){n.querySelectorAll("[x-for]").forEach(t=>{const e=t.getAttribute("x-for"),[r,s]=e.split(" in ").map(d=>d.trim()),i=document.createComment(`x-for="${e}"`);t.parentNode.insertBefore(i,t),t.parentNode.removeChild(t),(()=>{const d=o[s]||[];let c=i.nextSibling;for(;c&&c.nodeType!==Node.COMMENT_NODE;){const a=c;c=a.nextSibling,a.remove()}d.forEach(a=>{var E;const g=x({[r]:a}),h=t.cloneNode(!0);h.removeAttribute("x-for"),(E=i.parentNode)==null||E.appendChild(h),b(g,i.parentNode)})})()})}function A(n,o){n.querySelectorAll("[x-if]").forEach(t=>{const e=t.getAttribute("x-if"),r=document.createComment(`x-if="${e}"`);t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t);const s=()=>{var i;o[e]?t.parentNode||(i=r.parentNode)==null||i.insertBefore(t,r.nextSibling):t.parentNode&&t.parentNode.removeChild(t)};s(),Object.defineProperty(o,e,{get:function(){return this[`_${e}`]},set:function(i){this[`_${e}`]=i,s()}})})}function b(n,o=document){A(o,n),v(o,n),o.querySelectorAll("[x-model]").forEach(t=>{const e=t.getAttribute("x-model"),r=l(n,e);t.tagName==="INPUT"||t.tagName==="TEXTAREA"?t.value=r||"":t.textContent=r||"",t.addEventListener("input",s=>{const i=s.target.value;T(n,e,i)})}),N(n)}function M(n){const o=x(n);b(o)}u.appX=M,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
