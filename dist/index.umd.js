(function(d,a){typeof exports=="object"&&typeof module<"u"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(d=typeof globalThis<"u"?globalThis:d||self,a(d["x-js"]={}))})(this,function(d){"use strict";function a(c,s){function i(r,o=[]){return new Proxy(r,{get(t,e){const n=t[e];return typeof n=="object"&&n!==null?i(n,[...o,e]):n},set(t,e,n){return t[e]=n,s([...o,e].join(".")),!0}})}return i(c)}function x(c,s,i){c.querySelectorAll(`[data-bind-path="${i}"]`).forEach(o=>{if(o.tagName==="INPUT"){const t=o,e=i.split(".").reduce((n,u)=>n[u],s);t.value!==e&&(t.value=e)}else{const t=o.textContent||"";t.includes("{")&&t.includes("}")?h(o,s):o.textContent=i.split(".").reduce((e,n)=>e[n],s)}})}function b(c,s,i){const r=i.split(".").reduce((o,t)=>o[t],s);if(c.tagName==="INPUT"){const o=c;o.value=r,o.addEventListener("input",t=>{const e=t.target.value,n=i.split("."),u=n.pop(),l=n.reduce((f,p)=>f[p],s);l[u]=e})}else c.textContent=r;c.setAttribute("data-bind-path",i)}function g(c,s){const i=c.getAttribute("@click");if(i){const r=new Function("model",`with(model) { ${i} }`);c.addEventListener("click",()=>r(s))}}function h(c,s){const i=c.textContent||"",r=i.matchAll(/\{\s*([\w.]+)\s*\}/g),o=[];for(const e of r){const n=e[1].trim(),u=e[0];o.push({path:n,placeholder:u})}function t(){let e=i;for(const{path:n,placeholder:u}of o){const l=n.split(".").reduce((f,p)=>f[p],s);e=e.replace(u,l??"")}c.textContent=e}t(),o.forEach(({path:e})=>{c.setAttribute("data-bind-path",e)})}function T(c,s){const i=document.querySelector(c),r=a(s,t=>{x(i,r,t)});function o(t){const e=t.getAttribute("x-model");if(e&&b(t,r,e),g(t,r),t.childNodes.length===1&&t.childNodes[0].nodeType===Node.TEXT_NODE){const n=t.textContent||"";n.includes("{")&&n.includes("}")&&h(t,r)}Array.from(t.children).forEach(n=>o(n))}o(i)}d.initializeApp=T,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
